"""
FIB-SEM Dual-Beam Tomography technique data definition.
"""

# Data for FIB-SEM Dual-Beam Tomography reference page
fib_sem_dual_beam_tomography_data = {'one_line_summary': 'FIB-SEM dual-beam tomography (also called slice-and-view or 3D-FIB-SEM) is an advanced volumetric imaging technique that combines focused ion beam (FIB) milling with scanning electron microscopy to generate three-dimensional reconstructions of material microstructure at nanometer resolution. The method operates by alternating automated cycles: a gallium ion beam precisely mills away thin layers (5-50 nm) from a sample surface, then SEM imaging (secondary or backscattered electrons) captures the freshly exposed cross-section. Sequential imaging of hundreds to thousands of slices produces a 3D dataset revealing internal structure, phase distribution, porosity networks, and interfaces with unprecedented spatial resolution (lateral: 5-20 nm; depth: 5-50 nm). In cultural heritage, FIB-SEM tomography enables non-destructive 3D characterization of pigment particle aggregation, corrosion layer stratification, paint layer interfaces, fiber networks in paper, and nanoparticle distributions in historical materials.', 'abstract': 'FIB-SEM dual-beam tomography (also called slice-and-view or 3D-FIB-SEM) is an advanced volumetric imaging technique that combines focused ion beam (FIB) milling with scanning electron microscopy to generate three-dimensional reconstructions of material microstructure at nanometer resolution. The method operates by alternating automated cycles: a gallium ion beam precisely mills away thin layers (5-50 nm) from a sample surface, then SEM imaging (secondary or backscattered electrons) captures the freshly exposed cross-section. Sequential imaging of hundreds to thousands of slices produces a 3D dataset revealing internal structure, phase distribution, porosity networks, and interfaces with unprecedented spatial resolution (lateral: 5-20 nm; depth: 5-50 nm). In cultural heritage, FIB-SEM tomography enables non-destructive 3D characterization of pigment particle aggregation, corrosion layer stratification, paint layer interfaces, fiber networks in paper, and nanoparticle distributions in historical materials.', 'physics_principle': 'FIB-SEM tomography exploits two distinct beam-matter interactions: (1) Ion milling: focused Ga⁺ ion beam (30 keV, 1-100 nA) sputters atoms from sample surface through momentum transfer. Milling removes precise thickness (5-50 nm per slice) exposing subsurface structure. (2) SEM imaging: electron beam (1-30 keV) generates secondary or backscattered electrons from freshly milled surface, creating high-resolution image. Automated sequence: mill slice → image → advance stage → mill next slice → image, repeated 100-5000 times. Stack of 2D images computationally assembled into 3D volume. BSE imaging provides material (Z) contrast; SE imaging provides topographic contrast. Voxel resolution: 5-20 nm lateral (electron beam spot size), 5-50 nm depth (slice thickness).', 'instruments_components': '**Source:**\nDual-beam system: (1) Liquid metal ion source (LMIS) for Ga⁺ ions; (2) Electron gun (Schottky FEG or cold FEG) for SEM. Ion beam: Ga⁺, 30 keV typical, 1 pA - 100 nA current, focused to 5-50 nm spot. Electron beam: 1-30 keV, 1 pA - 20 nA, focused to 1-10 nm spot (SEM resolution). Ions: fixed 30 keV (some systems 2-30 keV variable). Electrons: 0.5-30 keV. Ion beam power: 1-3000 pW (30 keV × 1 pA to 100 nA). Ion beam: rastered for milling; electron beam: rastered for imaging; 52° typical geometry between beams.\n\n**Detector:**\nIn-column SE detector (high-resolution SE), Everhart-Thornley SE detector (standard SE), Solid-state BSE detector (Z-contrast), Through-the-lens detector (TLD), or In-lens energy-selective detector. SE detectors: sensitive to <50 eV electrons; BSE: sensitive to keV-range electrons. SE: >80% collection; BSE: 50-80% depending on geometry. Time resolution: Nanosecond (supports fast scanning; typical: 1-30 seconds per image frame).\n\n**Critical Components:**\n- Dual-beam geometry (52° angle enables simultaneous access)\n- High-stability stage (sub-10 nm positioning accuracy over 24+ hours)\n- Automated slice-and-view software (controls milling, imaging, alignment)\n- Gas injection system (Pt or C deposition for surface protection)\n- High-vacuum system (prevents ion source contamination, reduces milling artifacts)\n- Image processing computer (GPU-accelerated for real-time alignment, 3D rendering)\n- Vibration isolation (critical for nanometer-scale resolution)\n- Drift correction algorithms (compensate for thermal/mechanical drift during long runs)\n\n**Typical Configuration:**\n**Standard FIB-SEM tomography setup:** Dual-beam FIB-SEM with Schottky FEG electron source and Ga⁺ LMIS ion source. Stage with eucentric tilt and 5-axis motorization. Imaging: 2-5 keV electrons, 0.4 nA current, in-lens SE detector or BSE detector for Z-contrast. Milling: 30 keV Ga⁺ ions, 1-30 nA current (depending on desired slice thickness and speed). Slice thickness: 10-30 nm (trade-off: thinner = better resolution but longer acquisition). Field of view: 10 × 10 μm to 50 × 50 μm. Image size: 2048 × 2048 pixels (5-25 nm pixel size). Acquisition: 500-2000 slices typical (5-60 μm total depth). Total time: 8-48 hours (automated overnight run). Protective Pt cap deposited over region of interest before milling to prevent surface damage.', 'resolution_detection': '**Spatial Resolution:**\nLateral Resolution: 5-20 nm (SEM electron probe size). Depth Resolution: 5-50 nm (slice thickness, user-controlled). Limiting factors: SEM resolution (electron beam spot size, aberrations), Slice thickness (thinner = better z-resolution but exponentially longer acquisition), Ion beam curtaining artifacts (shadow effects from topography), Sample drift during long acquisition (thermal, mechanical, charging), Milling quality (surface roughness, redeposition of sputtered material), Image alignment accuracy (registration between slices).\n\n**Interaction Depth:**\nFIB-SEM is a true 3D bulk technique. Ion beam penetration ~20 nm but sputtering removes material layer-by-layer, exposing progressively deeper structure. SEM imaging of each freshly exposed surface provides data from that depth. Total sampled depth: 1-50 μm typical (limited by milling time and sample drift). Unlike projection techniques, every voxel in reconstructed volume is directly measured. Paint layers (pigment + binder): 5-30 μm typical (single to multiple layers), can image full paint stratigraphy at nanometer resolution. Corrosion layers on metals: 10-50 μm (corrosion product thickness), reveals stratification, porosity, metal-corrosion interface. Paper and parchment: 20-100 μm (through thickness), complete fiber network topology. Ceramics and glass: 5-30 μm, phase distribution, porosity, manufacturing defects. Gilding and surface treatments: 1-10 μm (coating + substrate interface), reveals nanoscale interface structure.\n\n**Detection Limits:**\nFeature size: ~10 nm (2-3 voxels minimum). Phase discrimination: depends on contrast mechanism (BSE: ΔZ ≥ 2 required; SE: topographic features > 5 nm). Dynamic range: 10³-10⁴ (gray levels in SEM image; 8-16 bit acquisition). Signal-to-noise: SNR 20-200 typical; improves with longer SEM dwell time (but increases total acquisition time).', 'sample_requirements': "**Destructiveness:** micro-destructive\n\n**Portability:** laboratory-only\n\n**Sample Preparation:**\n['Sampling required: Yes - typically 5-15 mm diameter, <5 mm height; micro-samples (0.1-1 mm) can be mounted on pins', 'Mount sample on Al or Cu stub using conductive adhesive (carbon or silver paint)', 'Orient region of interest toward electron beam (52° geometry)', 'Ensure sample stable and conductive', 'For insulators: coat with 5-10 nm Pt or Au/Pd (standard sputter coating)', 'Sample must be vacuum-compatible and stable under ion/electron beams', 'Minimal prep for bulk samples', 'For polished cross-sections: standard metallographic polish (1 μm finish)', 'For delicate surfaces: stabilize with protective Pt layer (deposited via GIS in FIB-SEM before tomography)', 'Tomography generates virtual cross-sections, so physical sectioning not required', 'However, may embed fragile samples (paint, paper) in epoxy resin and polish block face to expose edge for FIB access', 'Surface contamination (hydrocarbons) causes uneven milling (curtaining artifacts)', 'Outgassing samples (high water content, organics) degrade vacuum, contaminate ion source', 'Incomplete coating on insulators → charging artifacts during imaging', 'Redeposition of sputtered material on sidewalls of milled trench (reduces image quality)']", 'measurement_protocol': {'preparation': ["['Sampling required: Yes - typically 5-15 mm diameter, <5 mm height; micro-samples (0.1-1 mm) can be mounted on pins', 'Mount sample on Al or Cu stub using conductive adhesive (carbon or silver paint)', 'Orient region of interest toward electron beam (52° geometry)', 'Ensure sample stable and conductive', 'For insulators: coat with 5-10 nm Pt or Au/Pd (standard sputter coating)', 'Sample must be vacuum-compatible and stable under ion/electron beams', 'Minimal prep for bulk samples', 'For polished cross-sections: standard metallographic polish (1 μm finish)', 'For delicate surfaces: stabilize with protective Pt layer (deposited via GIS in FIB-SEM before tomography)', 'Tomography generates virtual cross-sections, so physical sectioning not required', 'However, may embed fragile samples (paint, paper) in epoxy resin and polish block face to expose edge for FIB access', 'Surface contamination (hydrocarbons) causes uneven milling (curtaining artifacts)', 'Outgassing samples (high water content, organics) degrade vacuum, contaminate ion source', 'Incomplete coating on insulators → charging artifacts during imaging', 'Redeposition of sputtered material on sidewalls of milled trench (reduces image quality)']"], 'data_collection': ["**STEP 1: Region of Interest Selection (10-30 minutes)**\n- Load sample into FIB-SEM\n- Using SEM imaging at low magnification (100-500×), navigate to region of interest\n- Acquire overview images and maps\n- Identify specific feature or area for 3D tomography (e.g., paint layer interface, corrosion layer, particle aggregate)\n- Consider: feature size, depth of interest, acquisition time budget\n- Critical parameters: ROI within eucentric height, Feature size appropriate for FOV, No major surface topography (causes curtaining)\n\n**STEP 2: Protective Platinum Deposition (15-30 minutes)**\n- To prevent ion beam damage to top surface of ROI, deposit protective Pt layer (1-2 μm thick) using GIS (gas injection system)\n- Pt precursor gas (methylcyclopentadienyl trimethyl platinum) injected near surface, decomposed by electron beam (e-beam deposition, ~10 min) followed by ion beam (FIB deposition, ~5 min for densification)\n- Pt cap protects surface from ion beam 'gouging' during milling\n- Critical parameters: Pt layer uniform and adherent, Covers entire ROI width plus margins, Densified by FIB (prevents porous cap)\n\n**STEP 3: Rough Milling - Trench Creation (20-60 minutes)**\n- Mill large trenches (~20 × 20 × 10 μm) on both sides of ROI using high ion beam current (10-30 nA)\n- Creates 'viewing face' (cross-section wall perpendicular to electron beam) and 'back face' (opposite side)\n- Trenches provide clearance for electron beam at 52° angle\n- This coarse milling removes bulk material quickly\n- Critical parameters: Trenches deep enough for full tomography depth, Viewing face flat and vertical, No redeposition on face of interest\n\n**STEP 4: Fine Milling - Surface Polishing (10-20 minutes)**\n- Reduce ion beam current to 1-5 nA\n- Polish viewing face with finer milling to remove roughness and redeposited material from coarse milling\n- Goal: smooth, artifact-free surface for high-quality imaging\n- May use 'cleaning cross-section' pattern (gentle polish at shallow angle)\n- Critical parameters: Surface roughness <10 nm, No curtaining artifacts, Face perpendicular to electron beam (52° to stage)\n\n**STEP 5: Software Setup - Slice-and-View Parameters (10-20 minutes)**\n- Launch automated tomography software (Auto Slice & View, Atlas 5, etc.)\n- Define acquisition parameters: slice thickness (10-50 nm), number of slices (100-5000), imaging parameters (voltage, current, dwell time, resolution), milling parameters (ion current, milling depth)\n- Set autofocus and drift correction intervals (every N slices)\n- Define fiducial markers for image alignment\n- Critical parameters: Slice thickness appropriate for z-resolution needed, Total depth sufficient to capture feature, Milling current balanced (speed vs. quality)\n\n**STEP 6: Test Cycle (10-30 minutes)**\n- Run 5-10 test slices to verify parameters\n- Inspect image quality, milling quality, drift\n- Adjust if needed: increase ion current if too slow, decrease if rough; adjust SEM dwell time if noisy; verify autofocus working\n- Confirm image alignment algorithm functioning\n- Critical parameters: Images sharp and artifact-free, Slices align properly, No excessive drift (< 1 pixel per 10 slices)\n\n**STEP 7: Automated Acquisition (8-48 hours automated)**\n- Start full acquisition run\n- System operates autonomously: (1) Mill slice (remove thin layer with FIB), (2) Retract ion beam, (3) Image with SEM (SE or BSE), (4) Save image with metadata, (5) Perform autofocus/drift correction if interval reached, (6) Advance to next slice\n- Typical cycle time: 20-60 seconds per slice\n- Total time: 8-48 hours for 500-2000 slices\n- Monitor remotely for first hour, then leave overnight\n- Critical parameters: System stability maintained, No vacuum issues, No catastrophic drift or charging, All images captured successfully\n\n**STEP 8: Post-Acquisition Inspection (15-30 minutes)**\n- After run completes, inspect image stack for quality\n- Check for: drift (are features staying aligned?), charging artifacts (bright/dark streaks), milling artifacts (curtaining, redeposition), image alignment issues\n- Note any problematic slices for exclusion\n- Verify total depth achieved matches plan\n\n**STEP 9: Sample Documentation and Removal (10-15 minutes)**\n- Acquire final overview images showing milled region\n- Photograph sample position\n- Export acquisition log with all parameters\n- Remove sample from chamber\n- Inspect for damage (should be localized to milled region only, <50 × 50 μm area)"], 'calibration': ['**Standards used:** SEM magnification calibration standard (grating, nanoparticles), Known sample for slice thickness calibration (measure before/after milling), Multi-material test sample for BSE contrast calibration, Image alignment test pattern (fiducial markers).\n\n**Frequency:** Monthly: SEM magnification calibration. Per-run: slice thickness verification (first few slices). Yearly: full system calibration (beam alignment, detector efficiency).\n\n**Procedure:** Slice thickness calibration: mill known number of slices (e.g., 100 slices at 20 nm setting). Measure total depth using SEM tilt view or interferometry. Verify actual slice thickness matches nominal. SEM calibration: image nanoparticle standard, measure particle spacing, compare to certified value.']}, 'data_outputs': '**Raw Data Format:**\n**File Formats:** TIFF stack (individual TIFF per slice), Multi-page TIFF (all slices in one file), HDF5 (hierarchical data format), MRC (Medical Research Council format), Raw binary (with metadata sidecar).\n\n**Data Structure:** 3D array: x (width) × y (height) × z (depth). Typical dimensions: 2048 × 2048 × 500 to 2048 × 2048 × 2000 voxels. Each voxel: 8-bit or 16-bit grayscale intensity.\n\n**Typical File Sizes:** 2-20 GB per dataset (2048 × 2048 × 1000 slices × 2 bytes = 8 GB uncompressed).', 'data_analysis_pipeline': {'preprocessing': '- Image alignment (registration): Correct for drift between slices. Use cross-correlation or feature-based alignment (SIFT). Rigid (translation + rotation) or affine transformation. Critical for accurate 3D reconstruction. Software: Fiji (StackReg), IMOD, custom scripts\n- Cropping and binning: Crop to region of interest (remove edges with artifacts). Optionally bin (2×2 or 4×4) to reduce data size and noise, at cost of resolution. Software: Fiji, Avizo\n- Contrast normalization: Normalize brightness and contrast across slices (ion beam current may drift slightly, affecting image intensity). Histogram matching or CLAHE. Software: Fiji, Python (scikit-image)\n- Noise reduction: Apply median or Gaussian filter (3D or slice-by-slice) to reduce shot noise. Use non-local means denoising for better edge preservation. Software: Fiji, Avizo\n- Artifact removal: Remove curtaining by Fourier filtering (suppress vertical frequency components). Interpolate over bad slices (charging artifacts, focus loss). Software: Fiji FFT filters, custom scripts', 'analysis_workflow': "**STEP 1: Data Quality Assessment**\n- Load image stack into visualization software. Scroll through slices to inspect for drift, artifacts, charging. Check alignment by examining features across slices (should not 'jump'). Identify and flag problematic slices for exclusion or correction.\n\n**STEP 2: 3D Volume Rendering**\n- Generate 3D visualization of volume. Adjust transfer function (opacity vs. gray value) to highlight features. Rotate, zoom, virtual slice in any orientation. Create orthogonal views (XY, XZ, YZ). Export snapshots and movies for presentations.\n\n**STEP 3: Segmentation**\n- Separate volume into distinct phases or features. Methods: (1) Thresholding (simple, works if phases have distinct gray values), (2) Watershed segmentation (for touching particles), (3) Machine learning segmentation (U-Net, random forest for complex morphologies). Assign labels: phase 1, phase 2, pores, etc.\n\n**STEP 4: Quantitative Analysis**\n- Extract metrics from segmented volume: (1) Phase volume fractions, (2) Particle size distributions (3D equivalent spherical diameter), (3) Porosity and pore size distribution, (4) Surface area, (5) Tortuosity of networks (fibers, pores), (6) Interface area between phases. Generate histograms and statistical summaries.\n\n**STEP 5: 3D Structural Characterization**\n- Analyze spatial relationships: particle connectivity, pore network topology, layer interface roughness. Use skeletonization for fiber networks. Perform distance transforms to quantify feature spacing. Compute fractal dimensions for rough surfaces.\n\n**STEP 6: Correlation with Other Data**\n- If elemental data exists (EDX), register EDX maps to FIB-SEM volume. Overlay composition on structure. Compare FIB-SEM microstructure to macro-scale imaging (optical, CT) for multi-scale integration.\n\n**STEP 7: Export and Visualization**\n- Generate figures: orthoslices, 3D renderings, segmented phase visualizations. Export quantitative data (spreadsheets, plots). Create 3D models for external rendering (STL, OBJ formats). Prepare animations (fly-through, rotation, virtual dissection)."}, 'artifacts_troubleshooting': "**Troubleshooting:**\n- Protective Pt cap intact (no ion beam damage to top surface)\n- Viewing face smooth and vertical (no curtaining, no redeposition)\n- SEM images sharp with good contrast (proper focus, stigmation)\n- No charging artifacts (bright streaks, image distortion)\n- Slice-to-slice alignment adequate (<5 pixel drift per 100 slices)\n- Total depth achieved matches plan (verify slice count and thickness)\n- No catastrophic sample damage (beam-induced contamination, structural collapse)\n- Common artifacts: Curtaining - vertical streaks in SEM images due to surface topography or composition variations causing differential sputtering, Redeposition - sputtered material lands on viewing face, obscuring fine details, Charging - insulators accumulate charge, deflecting electron beam (bright/dark streaks, image distortion), Drift - sample moves during acquisition due to thermal expansion, mechanical creep, or charging (features shift between slices), Waterfall effect - gradual z-slope accumulates over many slices if milling not perfectly calibrated, Shadowing - low-angle features cast 'shadows' where ion beam cannot reach, creating unmilled regions\n- Troubleshooting: Severe curtaining artifacts (improve surface polish before FIB; use lower ion current for finer milling; plasma-clean sample to remove contamination; use 'curtain reduction' milling patterns), Charging during imaging (re-coat sample (thicker layer); reduce SEM beam current; use BSE imaging (less charging); use charge neutralization (low-energy electron flood gun)), Excessive drift (>10 pixels per 100 slices) (wait for thermal equilibrium (2-4 hours after sample loading); enable drift correction every 5-10 slices; reduce SEM beam current to minimize charging; use fiducial markers for tracking), Poor alignment between slices (use automated drift correction; define fiducial markers outside ROI for tracking; post-process with image registration algorithms (cross-correlation, feature matching)), Redeposition on viewing face (mill wider/deeper trenches; use lower ion current (less material sputtered); increase working distance (allows material to escape); use 'cleaning cross-section' intermittently)", 'multimodal_pairings': '**Complementary Techniques:**\n\n- sem-edx\n\n- tem\n\n- x-ray-ct\n\n- raman-microscopy\n\n- afm', 'strengths_limitations': {'strengths': ['See technique documentation'], 'limitations': ['See technique documentation']}, 'lab_checklist': ['Protective Pt cap intact (no ion beam damage to top surface)', 'Viewing face smooth and vertical (no curtaining, no redeposition)', 'SEM images sharp with good contrast (proper focus, stigmation)', 'No charging artifacts (bright streaks, image distortion)', 'Slice-to-slice alignment adequate (<5 pixel drift per 100 slices)', 'Total depth achieved matches plan (verify slice count and thickness)', 'No catastrophic sample damage (beam-induced contamination, structural collapse)', "Common artifacts: Curtaining - vertical streaks in SEM images due to surface topography or composition variations causing differential sputtering, Redeposition - sputtered material lands on viewing face, obscuring fine details, Charging - insulators accumulate charge, deflecting electron beam (bright/dark streaks, image distortion), Drift - sample moves during acquisition due to thermal expansion, mechanical creep, or charging (features shift between slices), Waterfall effect - gradual z-slope accumulates over many slices if milling not perfectly calibrated, Shadowing - low-angle features cast 'shadows' where ion beam cannot reach, creating unmilled regions", "Troubleshooting: Severe curtaining artifacts (improve surface polish before FIB; use lower ion current for finer milling; plasma-clean sample to remove contamination; use 'curtain reduction' milling patterns), Charging during imaging (re-coat sample (thicker layer); reduce SEM beam current; use BSE imaging (less charging); use charge neutralization (low-energy electron flood gun)), Excessive drift (>10 pixels per 100 slices) (wait for thermal equilibrium (2-4 hours after sample loading); enable drift correction every 5-10 slices; reduce SEM beam current to minimize charging; use fiducial markers for tracking), Poor alignment between slices (use automated drift correction; define fiducial markers outside ROI for tracking; post-process with image registration algorithms (cross-correlation, feature matching)), Redeposition on viewing face (mill wider/deeper trenches; use lower ion current (less material sputtered); increase working distance (allows material to escape); use 'cleaning cross-section' intermittently)"], 'keywords': ['FIB-SEM', 'dual-beam', 'slice-and-view', '3D tomography', 'FIB', 'SEM', 'focused ion beam', 'nanoscale 3D imaging', 'microstructure', 'heritage conservation', 'cultural heritage']}
