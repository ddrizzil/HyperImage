"""
X-ray Holography technique data definition.
"""

# Data for X-ray Holography reference page
x_ray_holography_data = {'one_line_summary': 'X-ray holography is an advanced coherent X-ray imaging technique that records both amplitude and phase information of X-ray wavefronts to create three-dimensional images with nanometer-scale resolution. Unlike conventional X-ray radiography which only captures intensity (amplitude squared), holography preserves phase relationships by interfering object waves with a coherent reference wave. The recorded hologram is computationally reconstructed to produce 3D volumetric images showing internal structure at resolutions far exceeding conventional X-ray imaging. In cultural heritage, X-ray holography can reveal nanoscale pigment particle structures, crystalline domain organization, surface morphology beneath layers, and material interfaces with unprecedented detail, though currently limited to synchrotron facilities.', 'abstract': 'X-ray holography is an advanced coherent X-ray imaging technique that records both amplitude and phase information of X-ray wavefronts to create three-dimensional images with nanometer-scale resolution. Unlike conventional X-ray radiography which only captures intensity (amplitude squared), holography preserves phase relationships by interfering object waves with a coherent reference wave. The recorded hologram is computationally reconstructed to produce 3D volumetric images showing internal structure at resolutions far exceeding conventional X-ray imaging. In cultural heritage, X-ray holography can reveal nanoscale pigment particle structures, crystalline domain organization, surface morphology beneath layers, and material interfaces with unprecedented detail, though currently limited to synchrotron facilities.', 'physics_principle': 'X-ray holography exploits the wave nature of X-rays to record three-dimensional information. A coherent X-ray beam is split into two paths: object beam (passes through sample, acquiring phase shifts from refractive index variations) and reference beam (bypasses sample). These beams interfere at a detector plane, creating an interference pattern (hologram) encoding both amplitude and phase of the object wave. Unlike intensity-based imaging (I ∝ |E|²), holography preserves phase information through interference fringes. Computational reconstruction (typically Fourier-based algorithms) extracts 3D structure from the 2D hologram. X-ray wavelengths (0.1-10 nm) enable atomic-to-nanoscale resolution, far exceeding visible-light holography (hundreds of nm resolution limit).', 'instruments_components': '**Source:**\nSynchrotron X-ray source (undulator or bending magnet beamline). High spatial coherence (transverse coherence length >100 μm); high temporal coherence (Δλ/λ ~ 10⁻⁴); tunable energy 0.3-30 keV typical. Soft X-ray: 0.3-2 keV (λ = 0.6-4 nm) for surface-sensitive; Hard X-ray: 5-30 keV (λ = 0.04-0.25 nm) for bulk. Flux: 10¹¹-10¹³ photons/s/mm² at sample (high brightness for short exposures). Highly collimated (<1 mrad divergence); coherent (Gaussian spatial mode); monochromatic (ΔE/E ~ 10⁻⁴).\n\n**Detector:**\nHigh-resolution X-ray CCD (visible-light + scintillator), Direct-detection X-ray camera (CMOS or hybrid pixel), or Photon-counting detector (Pilatus, Eiger). Sensitive to 0.3-30 keV X-rays (detector-dependent). Quantum efficiency 30-90% depending on energy and detector type. Time resolution: Exposure times: 0.1 seconds to minutes (depends on flux and sample).\n\n**Critical Components:**\n- High-coherence X-ray source (synchrotron undulator preferred)\n- High-resolution detector (5-10 μm pixel size, 12-16 bit dynamic range)\n- Ultra-stable sample mount (sub-nanometer mechanical stability during exposure)\n- Vibration-isolated optical table (critical for nanometer-scale resolution)\n- Evacuated beam path or He environment (reduce air scattering and absorption)\n- Precise energy selection (Δλ/λ ~ 10⁻⁴ for temporal coherence)\n- High-performance computing for hologram reconstruction (GPU-accelerated preferred)\n\n**Typical Configuration:**\n**Inline (Gabor) holography setup (most common for heritage):** Undulator beamline at synchrotron (8 keV, Si(111) monochromator, ΔE/E = 10⁻⁴). Sample (100 μm thick cross-section) mounted on motorized stage 50 mm from CCD detector (2048 × 2048 pixels, 6.5 μm pixel size, 16-bit). Parallel beam geometry (no focusing optics). He-filled flight tube between sample and detector. Exposure 1-10 seconds. Reference wave: direct beam (unscattered photons) interferes with scattered wave from sample. Record multiple holograms at different sample-detector distances for phase retrieval. Reconstruct using iterative phase retrieval algorithms (Gerchberg-Saxton, HIO).', 'resolution_detection': '**Spatial Resolution:**\nLateral Resolution: 10-100 nm typical (depends on wavelength, detector size, geometry). Depth Resolution: 50-500 nm axial resolution (worse than lateral due to geometry). Limiting factors: X-ray wavelength (shorter λ = better resolution; 0.1-1 nm for hard X-rays), Coherence length of X-ray source (longer = better; synchrotrons excellent), Detector pixel size and dynamic range (smaller pixels, higher bit depth = better), Sample-to-detector distance (shorter = better resolution but smaller field of view), Vibration and thermal stability during exposure, Photon statistics (shot noise limits phase reconstruction accuracy).\n\n**Interaction Depth:**\nX-ray holography is a transmission technique sampling entire object thickness along beam path (like conventional radiography). Penetration depth depends on X-ray energy and material: soft X-rays (0.3-2 keV) probe <100 μm in light materials, hard X-rays (>10 keV) penetrate mm-cm. Phase contrast strongest for light elements (C, O, N) where absorption is weak. Pigment particles (lead white, vermilion): 10-500 μm particles, full transmission. Organic materials (binding media, varnish): 100 μm - 1 mm, excellent phase contrast from C, O; weak absorption allows thick samples. Metal artifacts (bronze, silver, gold): 10-100 μm at soft X-ray; 1-10 mm at hard X-ray, high absorption requires high energy; can image surface layers or thin cross-sections. Ceramics and stone: 0.5-5 mm, intermediate Z elements; good phase and absorption contrast. Paper and parchment: 0.1-1 mm (full sheets), low Z, excellent phase contrast; can image fibers, additives, watermarks.\n\n**Detection Limits:**\nSingle nanometer sensitivity to refractive index variations (δn ~ 10⁻⁸); single-atom layer detection possible in ideal conditions. Dynamic range: 10³-10⁵ (limited by detector bit depth, typically 12-16 bit CCD or photon-counting detectors). Signal-to-noise: Phase contrast SNR 10-1000× better than absorption contrast for light elements.', 'sample_requirements': "**Destructiveness:** non-destructive\n\n**Portability:** synchrotron/facility\n\n**Sample Preparation:**\n['Sampling required: Yes - 10 μm - 5 mm (depends on X-ray energy and sample absorption); thin cross-sections ideal', 'Mount sample on low-absorption substrate (thin Kapton film, silicon nitride membrane, or carbon fiber)', 'Secure with minimal adhesive (avoid heavy elements)', 'For tomography: mount on rotation pin for 180° scan', 'Sample must be stable (no movement during minutes-long exposure)', 'Minimal prep for bulk samples', 'For high-resolution: thin sections (5-100 μm) via microtome, FIB, or ultramicrotomy', 'Polish cross-sections to optical quality if needed', 'Standard embedding and polishing; thickness 10-100 μm typical', 'Thinner = less absorption, better resolution', 'Can use FIB for site-specific nanoscale cross-sections', 'Heavy element contamination produces strong absorption artifacts', 'Surface contamination (oils, dust) creates unwanted phase contrast', 'Mounting adhesives should be low-Z (carbon-based, not epoxy with Cl or heavy fillers)', 'Air scattering and absorption (use He environment or vacuum for soft X-rays)']", 'measurement_protocol': {'preparation': ["['Sampling required: Yes - 10 μm - 5 mm (depends on X-ray energy and sample absorption); thin cross-sections ideal', 'Mount sample on low-absorption substrate (thin Kapton film, silicon nitride membrane, or carbon fiber)', 'Secure with minimal adhesive (avoid heavy elements)', 'For tomography: mount on rotation pin for 180° scan', 'Sample must be stable (no movement during minutes-long exposure)', 'Minimal prep for bulk samples', 'For high-resolution: thin sections (5-100 μm) via microtome, FIB, or ultramicrotomy', 'Polish cross-sections to optical quality if needed', 'Standard embedding and polishing; thickness 10-100 μm typical', 'Thinner = less absorption, better resolution', 'Can use FIB for site-specific nanoscale cross-sections', 'Heavy element contamination produces strong absorption artifacts', 'Surface contamination (oils, dust) creates unwanted phase contrast', 'Mounting adhesives should be low-Z (carbon-based, not epoxy with Cl or heavy fillers)', 'Air scattering and absorption (use He environment or vacuum for soft X-rays)']"], 'data_collection': ['**STEP 1: Beamline Setup and Energy Selection (30-60 minutes)**\n- Access synchrotron beamline\n- Select X-ray energy appropriate for sample: soft X-rays (0.5-2 keV) for light elements and surface sensitivity; hard X-rays (8-20 keV) for bulk imaging and heavy elements\n- Optimize monochromator for high coherence (narrow energy bandwidth ΔE/E ~ 10⁻⁴)\n- Verify beam stability and flux\n- Critical parameters: Energy optimized for sample thickness and composition, High flux (>10¹² photons/s), Good coherence (verify with test pattern)\n\n**STEP 2: Sample Mounting and Alignment (20-40 minutes)**\n- Mount sample on precision stage\n- Align sample perpendicular to X-ray beam using laser alignment tools\n- Position sample at optimal distance from detector (trade-off: close = higher resolution but smaller field of view; far = larger field but lower resolution)\n- Typical distance: 50-500 mm\n- Verify sample stability (no drift during test exposure)\n- Critical parameters: Sample perpendicular to beam, Mechanical stability confirmed, Sample in beam center\n\n**STEP 3: Detector Calibration and Dark Field (10-20 minutes)**\n- Acquire detector dark field (no X-rays): record electronic noise and offset\n- Acquire flat field (X-rays with no sample): record detector non-uniformity\n- These will be subtracted/normalized during reconstruction\n- Set detector parameters: gain, exposure time, binning\n- Verify detector not saturated at expected signal levels\n- Critical parameters: Dark current <1% of signal, Flat field uniform, No saturated pixels\n\n**STEP 4: Test Exposure and Parameter Optimization (15-30 minutes)**\n- Acquire short test hologram (1-10 seconds)\n- Inspect for sufficient contrast, no saturation, no motion blur\n- Optimize exposure time: longer = better SNR but risk of radiation damage and drift\n- Adjust sample-detector distance if field of view or resolution inadequate\n- Check interference fringes visible (indicates coherent recording)\n- Critical parameters: Fringes visible, SNR >10:1, No saturation, No sample damage\n\n**STEP 5: Hologram Acquisition (Single or Multiple Distances) (10-60 minutes per distance; hours for full tomography)**\n- Record hologram at optimized parameters\n- For phase retrieval: acquire holograms at 2-5 different sample-detector distances (multi-distance method improves reconstruction)\n- Exposure time: 1 second to 5 minutes per hologram depending on flux and sample\n- For tomography: rotate sample in small angular steps (0.5-2°), acquire hologram at each angle (180° or 360° total rotation)\n- Critical parameters: Sample stable during exposure, Sufficient photon counts, Multiple distances for phase retrieval\n\n**STEP 6: Reference Measurements (10-20 minutes)**\n- Acquire reference hologram without sample (direct beam only) for normalization\n- Acquire hologram of known sample (resolution test pattern) to calibrate spatial resolution\n- Document all acquisition parameters: energy, flux, exposure time, geometry\n\n**STEP 7: Data Quality Check (10-20 minutes)**\n- Inspect recorded holograms for artifacts: mechanical vibrations (blurred fringes), beam instability (fluctuating intensity), detector issues (dead pixels, streaks)\n- Verify contrast and fringe visibility\n- If issues detected, repeat acquisition with corrections\n\n**STEP 8: Sample Condition Assessment (5-10 minutes)**\n- After exposure, inspect sample for radiation damage (discoloration, structural changes)\n- Compare pre- and post-exposure images if available\n- Note: X-ray holography doses can be high (10⁴-10⁶ Gy); organic materials may degrade\n- For sensitive samples, minimize exposure and use cryogenic cooling if available'], 'calibration': ['**Standards used:** Siemens star resolution test pattern (X-ray compatible), Gold nanoparticle arrays (known spacing for resolution measurement), Calibrated phase objects (known refractive index materials), Flat detector calibration using uniform beam.\n\n**Frequency:** Daily: detector dark/flat field calibration. Weekly: resolution test pattern verification. Per-sample: energy calibration and flux measurement.\n\n**Procedure:** Resolution calibration: image Siemens star or nanoparticle array; measure smallest resolvable features. Phase calibration: image material with known δ (refractive index decrement); compare reconstructed phase with theory. Geometry calibration: measure sample-detector distance using test pattern of known dimensions.']}, 'data_outputs': '**Raw Data Format:**\n**File Formats:** 16-bit TIFF (hologram images), HDF5 (hierarchical data for tomography), NeXus format (synchrotron standard), Raw binary (detector-specific).\n\n**Data Structure:** Single hologram: 2D array (e.g., 2048 × 2048 pixels). Tomography: 3D array (N_angles × height × width). Multi-distance: multiple 2D arrays at different propagation distances.\n\n**Typical File Sizes:** Single hologram: 8-16 MB (2k × 2k, 16-bit). Full tomography: 1-10 GB (180 projections).', 'data_analysis_pipeline': {'preprocessing': '- Dark field subtraction: Subtract detector dark current (no X-rays) from all holograms. Removes electronic offset and thermal noise. Software: MATLAB, Python (NumPy)\n- Flat field normalization: Divide by flat field image (uniform X-ray illumination, no sample). Corrects detector non-uniformity and beam profile. Software: Python, ImageJ\n- Bad pixel correction: Interpolate over dead or hot pixels using neighboring values. Use pre-determined bad pixel map from detector calibration. Software: Python (scikit-image)\n- Fourier filtering (optional): Apply high-pass filter to remove low-frequency background (detector glow, stray light). Band-pass filter can enhance fringes. Software: MATLAB, Python (scipy.fft)\n- Hologram alignment (multi-distance): Register multiple holograms to sub-pixel accuracy using cross-correlation. Necessary for phase retrieval from multiple distances. Software: MATLAB, Python', 'analysis_workflow': '**STEP 1: Hologram Quality Assessment**\n- Load hologram into analysis software. Visually inspect for fringes, artifacts. Calculate Fourier transform to verify spatial frequency content. Check SNR in region of interest. Verify no saturation or underflow.\n\n**STEP 2: Phase Retrieval Reconstruction**\n- Apply phase retrieval algorithm to extract complex object field (amplitude and phase) from hologram intensity. Common methods: (1) Single-distance: Transport of Intensity Equation (TIE). (2) Multi-distance: Gerchberg-Saxton (GS) or Hybrid Input-Output (HIO) iterative algorithms. (3) Inline holography: simultaneous amplitude and phase reconstruction. Typical iterations: 50-500 for convergence.\n\n**STEP 3: Phase Unwrapping**\n- Reconstructed phase wrapped to [-π, π] due to 2π ambiguity. Apply phase unwrapping algorithms (Goldstein branch-cut, least-squares, quality-guided) to obtain continuous phase. Critical for quantitative interpretation.\n\n**STEP 4: Amplitude and Phase Image Visualization**\n- Display reconstructed amplitude (absorption contrast) and phase (refractive index contrast) separately. Adjust grayscale lookup tables for optimal visualization. Phase typically displayed with color map (jet, parula) to emphasize variations.\n\n**STEP 5: 3D Volume Reconstruction (Tomography)**\n- If multiple projection angles acquired: use tomographic reconstruction algorithms. Filtered back-projection (FBP), algebraic reconstruction (ART, SIRT), or iterative methods. Generate 3D volume showing amplitude and phase distributions. Slice in arbitrary planes for inspection.\n\n**STEP 6: Quantitative Analysis**\n- Convert phase to refractive index: δ = (λ / 2π) × (Δφ / Δz), where Δz is object thickness. Calculate electron density: ρ_e = (2π / r_e λ²) × δ. Measure feature sizes, particle distributions, porosity. Generate line profiles and histograms.\n\n**STEP 7: Segmentation and Feature Extraction**\n- Segment 3D volume into distinct material phases (pigment particles, binder, voids). Use thresholding, watershed, or machine learning segmentation. Extract quantitative metrics: particle size distribution, volume fractions, connectivity.\n\n**STEP 8: Correlation with Other Techniques**\n- Register X-ray holography results with complementary data: SEM for morphology validation, XRF for elemental composition, Raman for molecular ID. Overlay datasets to correlate structure with chemistry.'}, 'artifacts_troubleshooting': '**Troubleshooting:**\n- Interference fringes clearly visible in hologram (indicates coherent recording)\n- Hologram SNR >10:1 (adequate photon statistics)\n- No detector saturation (all pixels <90% of full well)\n- Sample did not move during exposure (sharp fringes, no motion blur)\n- Multiple distance holograms show consistent features\n- Reconstructed phase and amplitude physically reasonable (no discontinuities)\n- No radiation damage visible on sample post-exposure\n- Common artifacts: Twin image artifact - ghost image on opposite side of hologram (inherent to inline holography), Phase wrapping - 2π ambiguity in reconstructed phase (appears as discontinuous jumps), Vibration artifacts - blurred or double fringes from sample/detector movement, Detector artifacts - dead pixels, hot pixels, vertical/horizontal lines from readout, Beam instability - fluctuating fringe contrast across hologram, Low-frequency phase artifacts from imperfect flat-field correction\n- Troubleshooting: No fringes visible in hologram (check monochromator settings; increase sample-detector distance; increase exposure time; verify sample in beam), Weak fringe contrast (improve energy bandwidth (narrower monochromator); thin sample; longer exposure; cool detector to reduce noise), Phase reconstruction fails (acquire multi-distance holograms; increase contrast; adjust phase retrieval algorithm parameters; try different algorithms), Twin image obscures reconstruction (use multi-distance phase retrieval; implement iterative algorithms (HIO, ER); acquire off-axis hologram if possible), Sample damaged after exposure (reduce exposure time; attenuate beam; use cryogenic cooling; accept that some samples cannot be imaged non-destructively)', 'multimodal_pairings': '**Complementary Techniques:**\n\n- xrf-tomography\n\n- sem-edx\n\n- ct-tomography\n\n- raman-microscopy\n\n- tem', 'strengths_limitations': {'strengths': ['See technique documentation'], 'limitations': ['See technique documentation']}, 'references': [{'citation': "Gabor, D. 1948. 'A New Microscopic Principle.' Nature 161 (4098): 777-778.", 'doi': '10.1038/161777a0'}, {'citation': "McNulty, I., et al. 1992. 'High-Resolution Imaging by Fourier Transform X-ray Holography.' Science 256 (5059): 1009-1012.", 'doi': '10.1126/science.256.5059.1009'}, {'citation': "Cloetens, P., et al. 1999. 'Holotomography: Quantitative Phase Tomography with Micrometer Resolution Using Hard Synchrotron Radiation X Rays.' Applied Physics Letters 75 (19): 2912-2914.", 'doi': '10.1063/1.125225'}, {'citation': "Gonzalez, V., et al. 2020. 'Revealing the Composition and State of Pigmentary Materials at the Nanoscale Using Synchrotron Radiation: The Case of Rembrandt's Lead White.' Analytical Chemistry 92: 13057-13065.", 'doi': '10.1021/acs.analchem.0c02148'}], 'lab_checklist': ['Interference fringes clearly visible in hologram (indicates coherent recording)', 'Hologram SNR >10:1 (adequate photon statistics)', 'No detector saturation (all pixels <90% of full well)', 'Sample did not move during exposure (sharp fringes, no motion blur)', 'Multiple distance holograms show consistent features', 'Reconstructed phase and amplitude physically reasonable (no discontinuities)', 'No radiation damage visible on sample post-exposure', 'Common artifacts: Twin image artifact - ghost image on opposite side of hologram (inherent to inline holography), Phase wrapping - 2π ambiguity in reconstructed phase (appears as discontinuous jumps), Vibration artifacts - blurred or double fringes from sample/detector movement, Detector artifacts - dead pixels, hot pixels, vertical/horizontal lines from readout, Beam instability - fluctuating fringe contrast across hologram, Low-frequency phase artifacts from imperfect flat-field correction', 'Troubleshooting: No fringes visible in hologram (check monochromator settings; increase sample-detector distance; increase exposure time; verify sample in beam), Weak fringe contrast (improve energy bandwidth (narrower monochromator); thin sample; longer exposure; cool detector to reduce noise), Phase reconstruction fails (acquire multi-distance holograms; increase contrast; adjust phase retrieval algorithm parameters; try different algorithms), Twin image obscures reconstruction (use multi-distance phase retrieval; implement iterative algorithms (HIO, ER); acquire off-axis hologram if possible), Sample damaged after exposure (reduce exposure time; attenuate beam; use cryogenic cooling; accept that some samples cannot be imaged non-destructively)'], 'keywords': ['X-ray holography', 'synchrotron', 'nanoscale imaging', 'phase contrast', '3D tomography', 'coherent X-rays', 'holotomography', 'pigment analysis', 'corrosion', 'heritage materials', 'cultural heritage']}
